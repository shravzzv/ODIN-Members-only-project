extends layout

block content
  main.pane.updatePassword.newPassword
    h1 Create a new password

    - const newPasswordError = errors && errors.find(item => item.path === 'newPassword')
    - const passwordConfirmError = errors && errors.find(item => item.path === 'passwordConfirm')

    form(action="/dashboard/password/forgot/newpassword", method="post")
      .formControl
        label(for="newPassword") New Password*:
        input#newPassword(type="password", name="newPassword", value=newPassword ? newPassword : '')
        if newPasswordError
          span.error= newPasswordError.msg

      .formControl
        label(for="passwordConfirm") Confirm New Password*:
        input#passwordConfirm(type="password", name="passwordConfirm", value=passwordConfirm ? passwordConfirm : '')
        if passwordConfirmError
          span.error= passwordConfirmError.msg
      
      .formControl
        label(for="showPasswords") Show passwords:
        input#showPasswords(type="checkbox", name="showPasswords")

      button.filled(type="submit") Submit

  script.
    const passwordInputs = document.querySelectorAll('input[type="password"]')
    const passwordsToggle = document.querySelector('#showPasswords')
    const handleToggle = (e) => {
      passwordInputs.forEach((input) => {
        input.type = e.target.checked ? 'text' : 'password'
      })
    }
    passwordsToggle.addEventListener('input', handleToggle)